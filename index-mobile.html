<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <!-- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content="#6c63ff">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ³ÙŠÙ„ ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹">
  <meta name="keywords" content="ØªÙ†Ø¸ÙŠÙ Ù…ÙƒÙŠÙØ§Øª, Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª, ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹, ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ø§Ù„">
  <meta name="author" content="TopClim Devs">  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->  <title>ğŸ“² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ø¯ÙØ¹ | TopClim</title>
  <link rel="shortcut icon" href="icons/icon-192.png" type="image/png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="manifest" href="manifest.json">  <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">  <!-- Bootstrap + Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">  <!-- Ø³ØªØ§ÙŠÙ„ Ù…Ø®ØµØµ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ -->  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: #f4f4f9;
      color: #333;
      margin: 0;
      padding: 0;
    }

    header {
      background: #6c63ff;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .main-title {
      font-size: 18px;
      font-weight: bold;
    }

    .container {
      padding: 20px;
    }

    .card {
      border: none;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }

    .btn-primary {
      background-color: #6c63ff;
      border-color: #6c63ff;
    }

    .btn-primary:hover {
      background-color: #554bcb;
    }

    .form-label {
      font-weight: 500;
    }

    .section-title {
      font-size: 16px;
      font-weight: bold;
      color: #6c63ff;
      margin-bottom: 10px;
    }

    .profile-section {
      background-color: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .profile-section p {
      margin: 6px 0;
    }

    footer {
      text-align: center;
      font-size: 13px;
      color: #aaa;
      padding: 15px;
    }

    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
    .dark-mode {
      background: #1e1e2f;
      color: #eee;
    }
    .dark-mode header {
      background: #2c2c3f;
    }
    .dark-mode .card, .dark-mode .profile-section {
      background: #2c2c3f;
      color: #ddd;
    }
    .dark-mode .btn-primary {
      background-color: #7c5bfc;
    }

    /* ØªØ­Ù…ÙŠÙ„ Ù…Ø®ØµØµ */
    #loader {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: rgba(255,255,255,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #loader div {
      width: 30px;
      height: 30px;
      border: 3px solid #6c63ff;
      border-radius: 50%;
      border-top: 3px solid transparent;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Ø´Ø±ÙŠØ· ØªÙ†Ù‚Ù„ Ø³ÙÙ„ÙŠ Ù…Ø¹ Ø²Ø± + Ù…Ø±ÙƒØ²ÙŠ */
    .bottom-bar {
      position: fixed;
      bottom: 0;
      right: 0;
      left: 0;
      background: white;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      z-index: 1000;
    }

    .bottom-bar div {
      text-align: center;
      font-size: 12px;
      color: #6c63ff;
      cursor: pointer;
    }

    .bottom-bar div.active {
      font-weight: bold;
      color: #554bcb;
    }

    .bottom-bar .add-button {
      background-color: #6c63ff;
      color: white;
      font-size: 24px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      position: relative;
      top: -30px;
      border: none;
      outline: none;
    }

    .toast-message {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: #6c63ff;
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      z-index: 1001;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
  </style>
  </head>
<body>
  <!-- ğŸ”„ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div id="loader">
    <div></div>
  </div>  <!-- ğŸ” Ø§Ù„Ø±Ø£Ø³ -->  <header>
    <span class="main-title">ğŸ“‹ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
    <button id="logoutBtn" class="btn btn-light btn-sm">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </header>  <!-- ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->  <main id="mainPage" class="container">
    <div class="section-title">ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ø§Ù„</div>
    <div class="row gy-3">
      <div class="col-6">
        <div class="card p-3 text-center">
          <i class="bi bi-person-plus fs-3 text-primary"></i>
          <div class="fw-bold mt-2">Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</div>
          <span class="text-muted" id="newCount">0</span>
        </div>
      </div>
      <div class="col-6">
        <div class="card p-3 text-center">
          <i class="bi bi-cash-coin fs-3 text-success"></i>
          <div class="fw-bold mt-2">Ø¯ÙØ¹Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</div>
          <span class="text-muted" id="pendingPayments">0</span>
        </div>
      </div>
      <div class="col-6">
        <div class="card p-3 text-center">
          <i class="bi bi-check-circle fs-3 text-success"></i>
          <div class="fw-bold mt-2">Ù…Ø¯ÙÙˆØ¹</div>
          <span class="text-muted" id="paidCount">0</span>
        </div>
      </div>
      <div class="col-6">
        <div class="card p-3 text-center">
          <i class="bi bi-calendar-check fs-3 text-warning"></i>
          <div class="fw-bold mt-2">Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØºØ¯</div>
          <span class="text-muted" id="tomorrowJobs">0</span>
        </div>
      </div>
    </div>
  </main>  <!-- ğŸ“¦ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->  <main id="ordersPage" class="container d-none">
    <div class="section-title">ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
    <div id="ordersList"></div>
  </main>  <!-- ğŸ’³ ØµÙØ­Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ -->  <main id="paymentsPage" class="container d-none">
    <div class="section-title">ğŸ’³ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</div>
    <div id="paymentsList">
      <div class="card p-3 mb-3">
        <div class="d-flex justify-content-between">
          <strong>ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù… 1023</strong>
          <span class="text-success">Ù…Ø¯ÙÙˆØ¹Ø©</span>
        </div>
        <div>Ø§Ù„Ø²Ø¨ÙˆÙ†: ÙŠØ§Ø³ÙŠÙ†</div>
        <div>Ø§Ù„Ø®Ø¯Ù…Ø©: ØºØ³ÙŠÙ„ Ù…ÙƒÙŠÙ</div>
        <div>Ø§Ù„Ù…Ø¨Ù„Øº: 2500 Ø¯Ø¬</div>
        <div class="mt-2">
          <button class="btn btn-outline-primary btn-sm">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
        </div>
      </div>
      <!-- Ø§Ù„Ù…Ø²ÙŠØ¯ Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
    </div>
  </main>  <!-- ğŸ‘¤ ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->  <main id="profilePage" class="container d-none">
    <div class="section-title">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div>
    <div class="profile-section">
      <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> <span id="workerName">â€”</span></p>
      <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> <span id="workerPhone">â€”</span></p>
      <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> <span id="workerLocation">â€”</span></p>
      <hr>
      <button id="signOut" class="btn btn-outline-danger w-100">ğŸ”’ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </main>  <!-- â• Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ -->  <div class="position-fixed" style="bottom: 70px; left: 50%; transform: translateX(-50%); z-index: 1001;">
    <button class="add-button" onclick="openAddOrderForm()">â•</button>
  </div>  <!-- ğŸš¦ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->  <nav class="bottom-bar">
    <div onclick="showPage('mainPage')" class="active">
      <i class="bi bi-house-door"></i><br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    </div>
    <div onclick="showPage('ordersPage')">
      <i class="bi bi-bag-check"></i><br>Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    </div>
    <div onclick="showPage('paymentsPage')">
      <i class="bi bi-wallet2"></i><br>Ø§Ù„Ø¯ÙØ¹
    </div>
    <div onclick="showPage('profilePage')">
      <i class="bi bi-person"></i><br>Ø§Ù„Ø­Ø³Ø§Ø¨
    </div>
  </nav>  <!-- ğŸ“ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨ -->  <div id="addOrderModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">â• Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="newOrderForm">
            <div class="mb-3">
              <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
              <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
              <input type="tel" class="form-control" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
              <textarea class="form-control" rows="2" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
              <input type="date" class="form-control" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº</label>
              <input type="number" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨</button>
          </form>
        </div>
      </div>
    </div>
  </div>  <!-- ğŸ“¢ Ø¥Ø´Ø¹Ø§Ø± Ø³Ø±ÙŠØ¹ -->  <div id="toast" class="toast-message d-none">âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­</div>
<script type="module">
// âœ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  doc,
  deleteDoc,
  updateDoc
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// âœ… Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù„ÙˆØ¯Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
window.addEventListener("load", () => {
  document.getElementById("loader").style.display = "none";
});

// âœ… Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
const pages = ["mainPage", "ordersPage", "paymentsPage", "profilePage"];
function showPage(pageId) {
  pages.forEach(id => {
    document.getElementById(id).classList.add("d-none");
  });
  document.getElementById(pageId).classList.remove("d-none");

  // ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ
  document.querySelectorAll(".bottom-bar div").forEach(div => div.classList.remove("active"));
  const index = pages.indexOf(pageId);
  document.querySelectorAll(".bottom-bar div")[index].classList.add("active");
}

// âœ… Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø³ÙŠØ·
function showToast(message) {
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.classList.remove("d-none");
  setTimeout(() => toast.classList.add("d-none"), 3000);
}

// âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Firestore
async function loadOrders() {
  const snapshot = await getDocs(collection(db, "requests"));
  const orders = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
  document.getElementById("newCount").textContent = orders.length;
  document.getElementById("ordersList").innerHTML = orders.map(order => `
    <div class="card p-3 mb-2">
      <div class="d-flex justify-content-between">
        <strong>ğŸ“Œ ${order.name || "â€”"}</strong>
        <span class="badge bg-primary">${order.date || "â€”"}</span>
      </div>
      <div>ğŸ“ ${order.phone}</div>
      <div>ğŸ“ ${order.address}</div>
      <div>ğŸ’° ${order.amount} Ø¯Ø¬</div>
      <div class="mt-2 text-end">
        <button class="btn btn-outline-danger btn-sm" onclick="deleteOrder('${order.id}')">ğŸ—‘ Ø­Ø°Ù</button>
      </div>
    </div>`).join("");
}

// âœ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨
window.deleteOrder = async function(id) {
  if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ")) {
    await deleteDoc(doc(db, "requests", id));
    loadOrders();
    showToast("ğŸš« ØªÙ… Ø§Ù„Ø­Ø°Ù");
  }
}

// âœ… Ø­ÙØ¸ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
const newOrderForm = document.getElementById("newOrderForm");
newOrderForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  const inputs = newOrderForm.querySelectorAll("input, textarea");

  const newOrder = {
    name: inputs[0].value,
    phone: inputs[1].value,
    address: inputs[2].value,
    date: inputs[3].value,
    amount: parseFloat(inputs[4].value)
  };

  await addDoc(collection(db, "requests"), newOrder);
  newOrderForm.reset();
  const modal = bootstrap.Modal.getInstance(document.getElementById("addOrderModal"));
  modal.hide();
  showToast("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
  loadOrders();
});

// âœ… ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨
window.openAddOrderForm = function() {
  const modal = new bootstrap.Modal(document.getElementById("addOrderModal"));
  modal.show();
};

// âœ… ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
const workerData = {
  name: "Ø£Ø­Ù…Ø¯",
  phone: "0555-123456",
  location: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©"
};

document.getElementById("workerName").textContent = workerData.name;
document.getElementById("workerPhone").textContent = workerData.phone;
document.getElementById("workerLocation").textContent = workerData.location;

// âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
const logoutBtn = document.getElementById("logoutBtn");
const signOutBtn = document.getElementById("signOut");
[logoutBtn, signOutBtn].forEach(btn => {
  btn.addEventListener("click", () => {
    alert("ğŸšª ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
    // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ ØªÙ†ÙÙŠØ° redirect Ø£Ùˆ clear session
  });
});

// âœ… ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
loadOrders();
</script>
</body>
</html>